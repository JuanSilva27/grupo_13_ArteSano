<!DOCTYPE html>
<html lang="es">
<%- include("../partials/head.ejs") %>

    <body>
        <%- include("../partials/header.ejs") %>

            <main class="edit">
                <P class="cont.titulo">
                <h1>Editando: <%= productEdit.nombre%>
                </h1>
                </P>
                <div class="background">
                    <form class="formEdit" action="/admin/edit/<%= productEdit.id %>?_method=PUT" method="POST"
                        enctype="multipart/form-data">

                        <p>
                            <label for="titulo">NOMBRE</label>
                            <input class="tamaño" type="text" id="titulo" name="titulo"
                                value="<%= productEdit.nombre %>">
                            <br>
                            <small>
                                <%= locals.errors && errors.titulo ? errors.titulo.msg : null %>
                            </small>
                            <small class="validation" id="smallTitulo"></small>
                        </p>

                        <p>
                            <label for="precio">PRECIO</label>
                            <input class="tamaño" type="number" id="precio" name="precio"
                                value="<%= productEdit.precio %>">
                            <br>
                            <small>
                                <%= locals.errors && errors.precio ? errors.precio.msg : null %>
                            </small>
                            <small class="validation" id="smallPrecio"></small>
                        </p>

                        <p>
                            <label for="categoria">CATEGORÍA</label>
                            <select name="categoria" class="tamaño">
                                <option selected hidden>Seleccione la categoría</option>
                                <% categorias.forEach(categorias=>{%>
                                    <option value="<%= categorias.id %>" <%=productEdit.id_categoria===categorias.id
                                        ? "selected" : null %> ><%= categorias.nombre %>
                                    </option>
                                    <% }) %>
                            </select>
                            <br>
                            <small>
                                <%= locals.errors && errors.categoria ? errors.categoria.msg : null %>
                            </small>

                        </p>
                        </p>

                        <p>
                            <label for="descripcion">DESCRIPCION</label>
                            <textarea class="tamaño-desc" name="descripcion" id="descripcion" cols="30"
                                rows="10"><%= productEdit.descripcion %></textarea>
                            <br>
                            <small>
                                <%= locals.errors && errors.descripcion ? errors.descripcion.msg : null %>
                            </small>
                            <small id="smallDescripcion"></small>
                        </p>

                        <p>
                            <label for="image">IMAGEN</label>
                            <input type="file" id="image" name="image" accept=".png, .jpg, .jpeg"><br>
                            <input type="text" id="imageName" name="imageName" value="<%= productEdit.productosIm[0].nombre%>" hidden> <br>
            <small><%= locals.errors && errors.image ? errors.image.msg : null %> </small>
            <small id="smallImage"></small>
                        </p>

                        <div class="botones">

                            <button type="submit" class="crear">Guardar</button>

                        </div>
                    </form>
                </div>
            </main>
            <%- include("../partials/footer.ejs") %>
    </body>

    <script src="/js/editValidate.js"> </script>

</html>